#
# @configure_input@
#

CC      = @CC@
CFLAGS := $(CFLAGS) -g -W -Wall -Wextra -std=c99 -I..

# every .c file
OBJECTS = $(patsubst %.c,%.o,$(wildcard *.c))

LIBS = -lnemo @LIBS@

.PHONY: libs clean
libs: $(OBJECTS)

%.o: %.c
	$(CC) $(CFLAGS) -fPIC -c $< -o $@
	$(CC) $(CFLAGS) -L.. -shared -Wl,-soname,$(patsubst %.c,%.so,$<) -o $(patsubst %.c,%.so,$<) $@ $(LIBS)

clean:
	rm -rf *.o
	rm -rf *.so

